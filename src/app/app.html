<main class="body">

  <div class="container">
    <div class="row">
      <div class="col-6">

        <!-----------Options -->
        <div class=" bg-light p-3">
          <div class="row">
            <div class="col-1">
              <img src="{{getImageForID('cerenovus')}}" (error)="onImageError($event,'cerenovus')"
                style="height: 60px; position:relative; top:3px">
            </div>
            <div class="col-11">
              <h1 class="ScriptName fs-1" style="padding-top:20px; color:maroon;">Madness Script Maker
              </h1>
            </div>
          </div>
          <div class="row">
            <div class="col-12 mb-3">
              <h5 class="card-title fs-3">Input JSON</h5>
            </div>
          </div>

          <div class="row">
            <div class="d-flex flex-row">

              <div class="col-4">
                <button class="btn btn-secondary mb-3 btn-lg btn-group w-100" (click)="paste()">Paste JSON</button>
              </div>

              <div class="ms-3 col">
                <button class="btn w-100 btn-primary btn-lg" [useExistingCss]="true" printSectionId="print-section"
                  printTitle={{scriptName}} [previewOnly]="false" ngxPrint>Save & Print</button>
              </div>
            </div>
            <div class="d-flex mt-1 flex-row">
              <div class="col-12 mb-3">
                <input type="file" id="formFile" class="custom-file-input fs-5 w-100 form-control" accept=".json"
                  default="Input JSON" (change)="onFileSelected($event)" />
              </div>

            </div>
            <div class="flex-row">
              <div class="col">
                <textarea type="text" class="form-control fs-6" [(ngModel)]="jsonInput" (ngModelChange)="create()"
                  rows="4" cols="100" placeholder=""></textarea>
              </div>

            </div>
          </div>











          <!-------------------->
          <img src="divider.png" style="height:1px; width:100%" class="mt-3">


          <div class="row mt-4">
            <div class="col">
              <h5 class="card-title fs-3 mb-3" (click)="expandImagesFun()">{{expandImagesToggle}} Images </h5>
            </div>
          </div>
          @if(expandImages){
          <div class="row mt-2 mb-3">
            <div class="col-5">
              <select [(ngModel)]="imageSelection" (ngModelChange)="imageOverwrite()" class="form-select fs-4">
                <option>SVG</option>
                <option>PNG</option>
                <option>Custom</option>
              </select>
            </div>
            @if(imageSelection == 'Custom'){
            <div class="col-7">
              <textarea type="text" [(ngModel)]="imageOverwriteText" (ngModelChange)="imageOverwrite()"
                placeholder="Custom image URL" rows="1" class="form-control fs-4"></textarea>
            </div>
            }
          </div>
          @if(imageSelection == 'Custom'){
          <div class="row">
            <div class="col-12">
              <div class="alert alert-primary" role="alert">
                Add a link to custom character images with {{'{'}}id{{'}'}} for the character id (ex pithag, lilmonsta).
                <br><br>Example:

                <i>
                  https://raw.githubusercontent.com/tomozbot/botc-icons/refs/heads/main/SVG/{{'{'}}id{{'}'}}.svg

                </i>
              </div>
            </div>
          </div>
          }
          }
          <img src="divider.png" style="height:1px; width:100%" class="mt-3">


          <div class="row mt-4">
            <div class="col">
              <h5 class="card-title fs-3 mb-3" (click)="expandFontFun()">{{expandFontToggle}} Font</h5>
            </div>
          </div>
          @if(expandFont){
          <div class="row">
            <div class="col-5">
              <label class="form-check-label fs-4 mt-2" for="showBoot">Custom font:</label>
            </div>
            <div class="col-7">
              <input class="form-control fs-5" type="file" accept=".ttf,.otf,.woff,.woff2" (change)="onFontUpload($event)" />
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-5 mt-2">
              <label class="form-check-label fs-4" for="showBoot">Title font size:</label>
            </div>
            <div class="col-6 mb-3">
              <input type="number" min="0" step="1" [(ngModel)]="scriptFontSizeInput" (ngModelChange)="create()" rows="1"
                class="form-control fs-4">
            </div>
            <div class="col-1 mt-1">
              <button class="btn btn-secondary" (click)="resetScriptFontSize()">R</button>
            </div>
          </div>

          <div class="row">
            <div class="col-5 mt-2">
              <label class="form-check-label fs-4" for="authorFontSize">Author font size:</label>
            </div>
            <div class="col-6 mb-3">
              <input type="number" min="0" step="1" [(ngModel)]="authorFontSizeInput" (ngModelChange)="create()" rows="1"
                class="form-control fs-4">
            </div>
            <div class="col-1 mt-1">
              <button class="btn btn-secondary" (click)="resetAuthorFontSize()">R</button>
            </div>
          </div>

          
          <div class="row">
            <div class="col-5 mt-2">
              <label class="form-check-label fs-4" for="authorOffset">Title horizontal offset:</label>
            </div>
            <div class="col-6 mb-3">
              <input type="number" min="-10" step="3" [(ngModel)]="titleOffsetInput" (ngModelChange)="create()" rows="1"
                class="form-control fs-4">
            </div>
            <div class="col-1 mt-1">
              <button class="btn btn-secondary" (click)="resetTitleOffset()">R</button>
            </div>
          </div>
        

          <div class="row">
            <div class="col-5 mt-2">
              <label class="form-check-label fs-4" for="authorOffset">Author vertical offset:</label>
            </div>
            <div class="col-6 mb-3">
              <input type="number" min="-20" step="1" [(ngModel)]="authorOffsetInput" (ngModelChange)="create()" rows="1"
                class="form-control fs-4">
            </div>
            <div class="col-1 mt-1">
              <button class="btn btn-secondary" (click)="resetAuthorOffset()">R</button>
            </div>
          </div>


          <div class="row">
            <div class="col">
              <div class="form-check form-switch ps-5 mb-3">
                <input class="form-check-input fs-5" type="checkbox" id="italicAuthor" [(ngModel)]="italicAuthor"
                  (ngModelChange)="create()">
                <label class="form-check-label fs-4" for="italicAuthor">Italicize author</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-check form-switch ps-5 mb-3">
                <input class="form-check-input fs-5" type="checkbox" id="titleFont" [(ngModel)]="titleFont"
                  (ngModelChange)="create()">
                <label class="form-check-label fs-4" for="titleFont">Use custom font for title</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-check form-switch ps-5 mb-3">
                <input class="form-check-input fs-5" type="checkbox" id="authorFont" [(ngModel)]="authorFont"
                  (ngModelChange)="create()">
                <label class="form-check-label fs-4" for="authorFont">Use custom font for author name</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-check form-switch ps-5 mb-3">
                <input class="form-check-input fs-5" type="checkbox" id="charFont" [(ngModel)]="charFont"
                  (ngModelChange)="create()">
                <label class="form-check-label fs-4" for="charFont">Use custom font for character names</label>
              </div>
            </div>

          </div>
          <div class="row">
            <div class="col">
              <div class="form-check form-switch ps-5 mb-3">
                <input class="form-check-input fs-5" type="checkbox" id="npcFont" [(ngModel)]="npcFont"
                  (ngModelChange)="create()">
                <label class="form-check-label fs-4" for="npcFont">Use custom font for NPCs and Travellers</label>
              </div>
            </div>

          </div>
          }





          <!--------------Options-->
          <img src="divider.png" style="height:1px; width:100%">

          <div class="row mt-4 mb-3">
            <div class="col">
              <h5 class="card-title fs-3" (click)="expandOptionsFun()">{{expandOptionsToggle}} Options</h5>
            </div>
          </div>
          @if(expandOptions){
          <div class="row">
            <div class="col-5">
              <label class="form-check-label fs-4 mt-2" for="showBoot">Storm Catcher:</label>
            </div>
            <div class="col-7">

              <select [(ngModel)]="stormcaughtName" (ngModelChange)="create()" class="form-select fs-4"
                title="Stormcaught Character">
                <option>none</option>
                @for(char of goodcharacters; track char){

                <option>
                  {{char.Name}}
                </option>
                }
              </select>

            </div>

            <div class="col-5 mt-1">
              <label class="form-check-label fs-4 mt-2" for="showBoot">Show Bootlegger:</label>
            </div>
            <div class="col-7 mt-1">

              <select [(ngModel)]="showBoot" (ngModelChange)="create()" class="form-select fs-4" title="showBootlegger">
                <option>none</option>
                <option>Top</option>
                <option>Bottom</option>
              </select>

            </div>
          </div>


          <div class="col">
            <div class="form-check form-switch ps-5 mt-3">
              <input class="form-check-input fs-5" type="checkbox" id="showDjinn" [(ngModel)]="showDjinn"
                (ngModelChange)="create()">
              <label class="form-check-label fs-4" for="showDjinn">Show Djinn on script</label>
            </div>
          </div>

          <div class="col">
            <div class="form-check form-switch ps-5 mt-3">
              <input class="form-check-input fs-5" type="checkbox" id="npcNames" [(ngModel)]="showNpcNames"
                (ngModelChange)="create()">
              <label class="form-check-label fs-4" for="npcNames">Show NPC names on script</label>
            </div>
          </div>

          <div class="col">
            <div class="form-check form-switch ps-5 mt-3">
              <input class="form-check-input fs-5" type="checkbox" id="invertOtherNight" [(ngModel)]="invertOther"
                (ngModelChange)="create()">
              <label class="form-check-label fs-4" for="invertOtherNight">Invert other night order</label>
            </div>
          </div>

          <div class="col">
            <div class="form-check form-switch ps-5 mt-3">
              <input class="form-check-input fs-5" type="checkbox" id="invertOtherNight" [(ngModel)]="showPlayerCount"
                (ngModelChange)="create()">
              <label class="form-check-label fs-4" for="showPlayerCount">Show player count</label>
            </div>
          </div>

          <div class="col">
            <div class="form-check form-switch ps-5 mt-3">
              <input class="form-check-input fs-5" type="checkbox" id="invertOtherNight" [(ngModel)]="showCharBottom"
                (ngModelChange)="create()">
              <label class="form-check-label fs-4" for="showPlayerCount">Show character icons on bottom of 2nd
                page</label>
            </div>
          </div>
          }

          <!------------------------------->
          <img src="divider.png" style="height:1px; width:100%" class="mt-3">
          <div class="row mt-4 mb-3">
            <div class="col">
              <h5 class="card-title fs-3" (click)="expandColorsFun()">{{expandColorsToggle}} Colors</h5>
            </div>
          </div>
          @if(expandColors){
          <div class="row mt-3">
            <div class="col-6">
              <label class="form-check-label fs-4">Script Name:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="scriptNameColor" [style.background]="scriptNameColor"
                [cpPresetColors]="['#000000', '#800000', '#d90a0a']" class="w-100" [cpEyeDropper]="true"
                [cpPosition]="'top-right'" (change)="create()" />

            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('scriptNameColor')">?</button>
            </div>

            <div class="col-6">
              <label class="form-check-label fs-4">Top Dividers:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="divTopColor" [style.background]="divTopColor" [cpPresetColors]="['#000000']"
                class="w-100" [cpEyeDropper]="true" [cpPosition]="'top-right'" (change)="create()" />

            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('divTopColor')">?</button>
            </div>
            <div class="col-6">
              <label class="form-check-label fs-4">Bottom Dividers:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="divBottomColor" [style.background]="divBottomColor" [cpPresetColors]="['#000000']"
                class="w-100" [cpEyeDropper]="true" [cpPosition]="'top-right'" (change)="create()" />

            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('divBottomColor')">?</button>
            </div>
          </div>




          <div class="row mt-3">
            <div class="col-6">
              <label class="form-check-label fs-4">Good Name:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="goodCharColor" [style.background]="goodCharColor"
                [cpPresetColors]="['#000000', '#0b6aaf', '#0000ff' ]" class="w-100" [cpEyeDropper]="true"
                [cpPosition]="'top-right'" (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('goodCharColor')">?</button>
            </div>
            <div class="col-6">
              <label class="form-check-label fs-4">Evil Name:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="evilCharColor" [style.background]="evilCharColor"
                [cpPresetColors]="['#000000', '#760A0D', '#ff0000' ]" class="w-100" [cpEyeDropper]="true"
                [cpPosition]="'top-right'" (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('evilCharColor')">?</button>
            </div>

            <div class="col-6">
              <label class="form-check-label fs-4">Good Ability:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="goodAbilityColor" [style.background]="goodAbilityColor"
                [cpPresetColors]="['#000000', '#0b6aaf']" class="w-100" [cpEyeDropper]="true" [cpPosition]="'top-right'"
                (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('goodAbilityColor')">?</button>
            </div>
            <div class="col-6">
              <label class="form-check-label fs-4">Evil Ability:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="evilAbilityColor" [style.background]="evilAbilityColor"
                [cpPresetColors]="['#000000', '#760A0D']" class="w-100" [cpEyeDropper]="true" [cpPosition]="'top-right'"
                (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('evilAbilityColor')">?</button>
            </div>

          </div>
          <div class="row mt-3">

            <div class="col-6">
              <label class="form-check-label fs-4">Fabled:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="fabledColor" [style.background]="fabledColor"
                [cpPresetColors]="['#000000', '#7a6550', '#aa9e00' ]" class="w-100" [cpEyeDropper]="true"
                [cpPosition]="'top-right'" (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('fabledColor')">?</button>
            </div>
            <div class="col-6">
              <label class="form-check-label fs-4">Loric:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="loricColor" [style.background]="loricColor"
                [cpPresetColors]="['#000000', '#6f854d', '#8ac729' ]" class="w-100" [cpEyeDropper]="true"
                [cpPosition]="'top-right'" (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('loricColor')">?</button>
            </div>
            <div class="col-6">
              <label class="form-check-label fs-4">Traveller:</label>
            </div>
            <div class="col-5">
              <input [(colorPicker)]="travColor" [style.background]="travColor"
                [cpPresetColors]="['#000000', '#500050', '#bd00bd' ]" class="w-100" [cpEyeDropper]="true"
                [cpPosition]="'top-right'" (change)="create()" />
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-secondary" (click)="randomColor('travColor')">?</button>
            </div>



          </div>
          <div class="row mt-3">
            <div class="col-4">
              <button class="btn btn-lg btn-secondary w-100" (click)="blackColors()">Black</button>
            </div>
            <div class="col-4">
              <button class="btn btn-lg btn-secondary w-100" (click)="resetColors()">Dark</button>
            </div>
            <div class="col-4">
              <button class="btn btn-lg btn-secondary w-100" (click)="lightColors()">Light</button>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-6">
              <button class="btn btn-lg btn-secondary w-100" (click)="darkWithTextColors()">Dark with Text</button>
            </div>
            <div class="col-6">
              <button class="btn btn-lg btn-secondary w-100" (click)="lightWithTextColors()">Light with Text</button>
            </div>

          </div>

          }

          @if(allJinxes.length >= 1){
          <img src="divider.png" style="height:1px; width:100%" class="mt-3 mb-3">
          <div class="row mt-3 mb-2">

            <div class="col">
              <h5 class="card-title fs-3" (click)="expandJinxFun()">{{expandJinxToggle}} Hide Jinxes</h5>
            </div>
          </div>
          @if(expandJinx){
          <div class="mt-3">
            <div class="row">
              <div class="col">
                <div class="form-check form-switch ps-5 mb-3">
                  <input class="form-check-input fs-5" type="checkbox" id="addBootRule" [(ngModel)]="addBootRule"
                    (ngModelChange)="create()">
                  <label class="form-check-label fs-4" for="addBootRule">Add Bootlegger rule</label>
                </div>
              </div>
            </div>
            @for(jinx of allJinxes2; track jinx){

            <div class="row" style="padding-left:20px">
              <input class="col-2 form-check-input fs-5" type="checkbox" id=jinx.char1-jinx.char2 checked
                (click)="dontShowJinxesFun(jinx.char1,jinx.char2)">
              <div class="col-5 form-check-label fs-4" for=jinx.char1-jinx.char2>{{getNameForID(jinx.char1)}}</div>
              <div class="col-5 form-check-label fs-4">{{getNameForID(jinx.char2)}}</div>
            </div>


            }
          </div>
          }
          }
          <img src="divider.png" style="height:1px; width:100%" class="mt-4 mb-4">
          <div class="row mt-3">
            <div class="col">
              <button class="btn btn-lg btn-dark w-100" (click)="reset()">Reset Options</button>
            </div>

          </div>

          <div class="col-12 mt-5">
            <div class="alert alert-secondary" role="alert">
              PDF Preview may not be fully accurate, click the Save & Print Button to view the final version. Print
              with
              A4 paper size.
            </div>
            <div class="col-12">
              <div class="alert alert-secondary" role="alert">
                Unofficial character art from <a href="https://github.com/tomozbot/botc-icons">Tomozbot's Github</a>
              </div>
            </div>

            <div class="alert alert-secondary" role="alert">
              Created by @Thomas04 on the Unoffical BOTC Discord. <br>Not endorsed by TPI.
              <br>
              Source Code: <a
                href="https://github.com/thomas0465/ScriptMaker">https://github.com/thomas0465/ScriptMaker</a>

            </div>

          </div>
        </div>
      </div>



      <div class="col-6">


        @if(jsonError && jsonInput){
        <div class="row">
          <div class="col-12">
            <div class="alert alert-danger fs-4" role="alert">
              Error! Incorrect json input
            </div>
          </div>
        </div>

        }

        <!----------Print--------------------------------------------------------->

        <div id="print-section">

          <!---- Page 1 --->
          <div class="print-page">
            @if(jsonInput){
            <div class="page1">

              <div class="page1header">
                <div class="HeaderRow">
                  <!----NPCs-->
                  <div style="padding-right:15px; padding-bottom:10px; position: relative; 
        top: 6px;">

                    @if(npcs.length > 3) {
                    <p class="npcNamePage1" style="padding-left:7px; padding-right:7px;"><b>+ {{npcs.length -
                        3}}</b>
                    </p>
                    }

                    @if (npcs[2]) {
                    @if(showNpcNames){
                    @if (npcs[2].Team === 'loric') {
                    <p class="npcNamePage1" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='loricColor'>
                      {{npcs[2].Name}}</p>
                    }@else{

                    <p class="npcNamePage1" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='fabledColor'>
                      {{npcs[2].Name}}</p>
                    }
                    }
                    <img src={{npcs[2].Image}} class="imagenpc" (error)="onImageError($event,npcs[2].ID)">
                    }

                    @if (npcs[1]) {
                    @if(showNpcNames){
                    @if (npcs[1].Team === 'loric') {
                    <p class="npcNamePage1" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='loricColor'>
                      {{npcs[1].Name}}</p>
                    }@else{

                    <p class="npcNamePage1" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='fabledColor'>
                      {{npcs[1].Name}}</p>
                    }
                    }
                    <img src={{npcs[1].Image}} class="imagenpc" (error)="onImageError($event,npcs[1].ID)">
                    }


                    @if (npcs[0]) {
                    @if(showNpcNames){
                    @if (npcs[0].Team === 'loric') {
                    <p class="npcNamePage1" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='loricColor'>
                      {{npcs[0].Name}}</p>
                    }@else{

                    <p class="npcNamePage1" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='fabledColor'>
                      {{npcs[0].Name}}</p>
                    }
                    }
                    <img src={{npcs[0].Image}} class="imagenpc" (error)="onImageError($event,npcs[0].ID)">
                    }
                  </div>


                  <!----Name and Author-->
                  <div class="d-flex" style="position:relative" [style.left]="titleOffset">
                    <div class="ScriptName" [style.font-family]="currentFont || 'Philo'" [style.color]="scriptNameColor"
                      [style.font-size]="scriptFontSize">
                      {{scriptName}}
                    </div>

                    @if (author){
                    <div class="Author" [style.font-family]="currentFontAuthor || 'Philo'"
                      [style.color]="scriptNameColor" [style.font-size]="authorFontSize" [style.bottom]="authorOffset">
                      <div class="AuthorText">
                        @if(italicAuthor){
                        <i>by {{author}}</i>
                        }
                        @if(!italicAuthor){
                        by {{author}}
                        }

                      </div>
                    </div>
                    }


                  </div>
                </div>

                <!-----Bootlegger row page 1-->
                @if (bootlegger.length > 0 && showBoot== 'Top'){

                <div class="divRowBootTop">
                  <div class="divider">
                    <img style="background-color:black" class="divPngTop">
                  </div>
                </div>
                <div class="bootleggerPage1Div">
                  <div class="bootleggerPage1Image">
                    <img src="{{getImageForID('bootlegger')}}" (error)="onImageError($event,'bootlegger')" height="60">
                  </div>


                  @if(bootlegger.length > 1){
                  <div style="position:relative; top:-5px;
  margin: 0px 0px -70px 0px;">
                    @for (rule of bootlegger; track rule){
                    <div class="bootleggerPage1Row">
                      <b style="padding-right: 80px;"></b>
                      <p>⦁</p>
                      <p class="bootleggerRule">{{ rule }}</p>
                    </div>
                    }
                  </div>
                  }

                  @if(bootlegger.length <= 1){ @for (rule of bootlegger; track rule){ <div class="bootleggerPage1Row">
                    <b style="padding-right:80px;"></b>
                    <p>⦁</p>
                    <p class="bootleggerRule">{{ rule }}</p>
                </div>
                }
                }
              </div>
              }
            </div>

            <div class="page1main" [style.height]="page1height">
              <!-- Townsfolk -->
              <div class="townsfolkRow mt-2">
                <div class="divider">
                  <img [style.background-color]="divTopColor" class="divPng" style="width: 85%;">
                </div>
                <div class="TypeHeader" [style.color]="divTopColor">TOWNSFOLK</div>
              </div>


              @for (item of townsfolkPage1; track item) {
              <div class="charRow" style="float: left;">
                <div class="charImageContainer">
                  <img src={{item.Image}} class="charImage" (error)="onImageError($event,item.ID)">
                </div>
                <div class="chartextrow">
                  <div class="charnamerow">
                    <b class="charname" [style.color]='goodCharColor' [style.font-family]="currentFontChar || 'Assi'">{{
                      item.Name }}</b>
                    @for (jinx of filteredJinxes; track jinx){
                    @if (jinx.char1 === item.ID){
                    @if (getImageForID(jinx.char2)) {
                    <img src={{getImageForID(jinx.char2)}} class="jinxIcon" (error)="onImageError($event,jinx.char2)">
                    }
                    }
                    }
                  </div>
                  <p class="charability" [style.line-height]="abilityLineHeight" [style.color]='goodAbilityColor'>
                    {{item.Ability}}</p>
                </div>
              </div>
              }



              <!-- Outsiders -->
              <div class="divRow">
                <div class="divider">
                  <img [style.background-color]="divTopColor" class="divPng" style="width: 86%;">
                </div>
                <div class="TypeHeader" [style.color]="divTopColor">OUTSIDERS</div>
              </div>

              @for (item of outsidersPage1; track item) {
              <div class="charRow">
                <div class="charImageContainer">
                  <img src={{item.Image}} class="charImage" (error)="onImageError($event,item.ID)">
                </div>
                <div class="chartextrow">
                  <div class="charnamerow">
                    <b class="charname" [style.color]='goodCharColor' [style.font-family]="currentFontChar || 'Assi'">{{
                      item.Name }}</b>
                    @for (jinx of filteredJinxes; track jinx){
                    @if (jinx.char1 === item.ID){
                    @if (getImageForID(jinx.char2)) {
                    <img src={{getImageForID(jinx.char2)}} class="jinxIcon" (error)="onImageError($event,jinx.char2)">
                    }
                    }
                    }
                  </div>
                  <p class="charability" [style.line-height]="abilityLineHeight" [style.color]='goodAbilityColor'>
                    {{item.Ability}}</p>

                </div>
              </div>
              }


              <!-- Minions -->
              <div class="divRow">
                <div class="divider">
                  <img [style.background-color]="divBottomColor" class="divPng" style="width: 87%;">
                </div>
                <div class="TypeHeader" [style.color]="divBottomColor">MINIONS</div>
              </div>

              @for (item of minionsPage1; track item) {
              <div class="charRow">
                <div class="charImageContainer">
                  <img src={{item.Image}} class="charImage" (error)="onImageError($event,item.ID)">
                </div>
                <div class="chartextrow">
                  <div class="charnamerow">
                    <b class="charname" [style.color]='evilCharColor' [style.font-family]="currentFontChar || 'Assi'">{{
                      item.Name }}</b>
                    @for (jinx of filteredJinxes; track jinx){
                    @if (jinx.char1 === item.ID){
                    @if (getImageForID(jinx.char2)) {
                    <img src={{getImageForID(jinx.char2)}} class="jinxIcon" (error)="onImageError($event,jinx.char2)">
                    }
                    }
                    }
                  </div>
                  <p class="charability" [style.line-height]="abilityLineHeight" [style.color]='evilAbilityColor'>
                    {{item.Ability}}</p>

                </div>
              </div>
              }


              <!-- Demons -->
              <div class="divRow">
                <div class="divider">
                  <div [style.background-color]='divBottomColor' class="divPng" style="width: 87%;">
                  </div>
                </div>
                <div class="TypeHeader" [style.color]="divBottomColor">DEMONS</div>
              </div>

              @for (item of demonsPage1; track item) {
              <div class="charRow">
                <div class="charImageContainer">
                  <img src={{item.Image}} class="charImage" (error)="onImageError($event,item.ID)">
                </div>
                <div class="chartextrow">
                  <div class="charnamerow">
                    <b class="charname" [style.color]='evilCharColor' [style.font-family]="currentFontChar || 'Assi'">{{
                      item.Name }}</b>
                    @for (jinx of filteredJinxes; track jinx){
                    @if (jinx.char1 === item.ID){
                    @if (getImageForID(jinx.char2)) {
                    <img src={{getImageForID(jinx.char2)}} class="jinxIcon" (error)="onImageError($event,jinx.char2)">
                    }
                    }
                    }
                  </div>
                  <p class="charability" [style.line-height]="abilityLineHeight" [style.color]='evilAbilityColor'>
                    {{item.Ability}}</p>

                </div>
              </div>
              }

              @if (bootlegger.length > 0 && showBoot== 'Bottom'){



              <div class="divRowBoot mt-1">
                <div class="divider">
                  <img style="background-color:black" class="divPngBottom">
                </div>
                <div class="TypeHeader"></div>
              </div>
              <div class="bootleggerPage1DivBottom mt-1" style="grid-column: span 2;">
                <div class="bootleggerPage1Image">
                  <img src="{{getImageForID('bootlegger')}}" (error)="onImageError($event,'bootlegger')" height="60"
                    style="position:relative; left:-15px;">
                </div>

                @if(bootlegger.length > 1){
                <div style="position:relative; top:-10px">
                  @for (rule of bootlegger; track rule){
                  <div class="bootleggerPage1Row">
                    <b style="padding-right: 70px;"></b>
                    <p>⦁</p>
                    <p class="bootleggerRule">{{ rule }}</p>
                  </div>
                  }
                </div>
                }

                @if(bootlegger.length <= 1){ @for (rule of bootlegger; track rule){ <div class="bootleggerPage1Row">
                  <b style="padding-right: 70px;"></b>
                  <p>⦁</p>
                  <p class="bootleggerRule">{{ rule }}</p>
              </div>
              }
              }



            </div>
            }


          </div>
          <footer class="footer">
            <i>

              <div class="footerText" style="float:right">
                * Not the first night
              </div>
            </i>
          </footer>

        </div>
        }


      </div>
      <!----End Page 1-->



      <!----Page 2 -->
      <div class="print-page">

        @if(jsonInput){

        <!---- First Night -->
        <div class="nightOrderFirst" style="float:left">
          @for (char of firstOrder;track char){
          @if( char){
          <img src={{getImageForID(char)}} class="nightIcon" (error)="onImageError($event,char)">
          }
          }
          <p class="firstnightText" [style.font-size]="showFirstNightText">FIRST NIGHT</p>
        </div>

        <!---- Other Nights -->
        <div class="nightOrderOther" style="float:right" [style.transform]="invertOtherDeg">
          @for (char of otherOrder;track char){
          @if( char){
          <img src={{getImageForID(char)}} class="nightIcon" (error)="onImageError($event,char)">
          }
          }
          <p class="othernightText" [style.font-size]="showOtherNightText">OTHER NIGHTS</p>
        </div>

        <div class="ScriptNameBottom" [style.color]="scriptNameColor" [style.font-family]="currentFont || 'Philo'">
          {{scriptName}}</div>

        <div class="page2main">
          <!----- NPCs Header -->
          @if(showFabled || showLoric){
          <div class="divRowPage2" style="padding-top:20px">
            <img style="background: black;" class="divPngPage2">

            @if(showFabled && !showLoric){
            <div class="HeaderPage2" style="width:80px">
              Fabled
            </div>
            }

            @if(!showFabled && showLoric){
            <div class="HeaderPage2" style="width:80px">
              Loric
            </div>
            }

            @if(showFabled && showLoric){
            <div class="HeaderPage2">
              Fabled & Loric
            </div>
            }

          </div>
          }

          <!----- Jinxes  -->
          @if (filteredJinxes2.length > 0){
          <div class="npcRow">
            <img src="{{getImageForID('djinn')}}" height="60" (error)="onImageError($event,'djinn')">
            <b class="jinxTitle" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='fabledColor'>Djinn</b>
          </div>

          @for (jinx of filteredJinxes2; track jinx){
          <div class="jinxRow">
            <b style="padding-right: 30px;"></b>
            <img src={{getImageForID(jinx.char1)}} class="jinxIcon2" (error)="onImageError($event,jinx.char1)">
            <img src={{getImageForID(jinx.char2)}} class="jinxIcon2" (error)="onImageError($event,jinx.char2)">
            <p class="jinxReason">{{jinx.reason}}</p>
          </div>
          }
          }

          @for (item of fabled; track item) {
          @if (
          item.ID !== 'djinn'
          ) {
          <div class="npcRow">
            <div class="image">
              <img src={{item.Image}} height="60" (error)="onImageError($event,item.ID)">
            </div>
            <div class="chartextrow">
              <b class="npcName" [style.font-family]="currentFontNpc || 'Assi'"
                [style.color]='fabledColor'>{{item.Name}}</b>
              <p class="npcAbility">{{item.Ability}}</p>
            </div>
          </div>
          }
          }

          <!----Bootlegger -->
          @if (bootlegger.length > 0 || characters.includes("bootlegger")){
          <div class="npcRow">
            <img src="{{getImageForID('bootlegger')}}" height="60" (error)="onImageError($event,'bootlegger')">
            <b class="npcName" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='loricColor'>Bootlegger</b>
          </div>


          @for (rule of bootlegger; track rule){
          <div class="bootleggerRow">
            <b style="padding-right: 70px;"></b>
            <p>⦁</p>
            <p class="bootleggerRule">{{ rule }}</p>
          </div>
          }
          }

          <!----Stormcatcher -->
          @if (stormcaught && stormcaught != "none"){
          <div class="npcRow">
            <img src="{{getImageForID('stormcatcher')}}" height="60" (error)="onImageError($event,'stormcatcher')">
            <div class="chartextrow">
              <b class="npcName" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='loricColor'>Storm
                Catcher</b>
              <p class="npcAbility">Name a good character. If in play, they can only die by execution, but evil
                players
                learn which player it is.</p>
            </div>
          </div>

          <div class="bootleggerRow">
            <b style="padding-right: 70px;"></b>
            <p style="padding-top:20px">⦁</p>
            <p class="bootleggerRule" style="padding-top:20px">The {{getNameForID(stormcaught)}} is stormcaught.
            </p>
          </div>
          }




          <!---- Loric -->
          @for (item of loric; track item) {
          @if (
          item.ID !== 'bootlegger' &&
          (item.ID !== 'stormcatcher' ||
          (!stormcaught || stormcaught === 'none')
          )
          ) {
          <div class="npcRow">
            <div class="image">
              <img src={{item.Image}} height="60" (error)="onImageError($event,item.ID)">
            </div>
            <div class="chartextrow">
              <b class="npcName" [style.font-family]="currentFontNpc || 'Assi'"
                [style.color]='loricColor'>{{item.Name}}</b>
              <p class="npcAbility">{{item.Ability}}</p>
            </div>
          </div>
          }
          }

          <!----- Travellers -->
          @if (trav.length > 0){

          <!----- Travellers Header -->
          <div class="divRowPage2" style="padding-top:20px">
            <img style="background: black;" class="divPngPage2">
            <div class="HeaderPage2">Travellers</div>
          </div>

          @for (item of trav; track item) {
          <div class="npcRow">
            <div class="image">
              <img src={{item.Image}} height="60" (error)="onImageError($event,item.ID)">
            </div>
            <div class="chartextrow">
              <b class="npcName" [style.font-family]="currentFontNpc || 'Assi'" [style.color]='travColor'>{{ item.Name
                }}</b>
              <p class="npcAbility">{{item.Ability}}</p>
            </div>
          </div>
          }
          }


          <!-----Player Count----->
          <div class="playerCountContainer" #playerCountContainer>

            @if(showPlayerCount){
            <img class="playerCountImage" src=playercount.png>
            }
            @if(showCharBottom){
            <div class="footer2">
              <div class="charImageContainerBottom">
                @for(char of townsfolk; track char){
                <img src={{char.Image}} class="charImageBottom" (error)="onImageError($event,char.ID)">
                }

                <img src=divider.png style="opacity: 0;" class="charImageBottom">

                @for(char of outsiders; track char){

                <img src={{char.Image}} class="charImageBottom" (error)="onImageError($event,char.ID)">
                }

                <img src=divider.png style="opacity: 0;" class="charImageBottom">

                @for(char of minions; track char){
                <img src={{char.Image}} class="charImageBottom" (error)="onImageError($event,char.ID)">
                }

                <img src=divider.png style="opacity: 0;" class="charImageBottom">

                @for(char of demons; track char){
                <img src={{char.Image}} class="charImageBottom" (error)="onImageError($event,char.ID)">
                }
              </div>
            </div>
            }
          </div>
        </div>




        }

      </div>



    </div>
  </div>
  </div>
  </div>

</main>