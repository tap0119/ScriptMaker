<main class="body">
    <div>
     
      <h1>Hello, {{ title() }}</h1>
      <textarea type="text" [(ngModel)]="jsonInput" (ngModelChange)="create()"></textarea>

      <button [useExistingCss]="true" printSectionId="print-section" ngxPrint>print</button> 
      
      <div id="print-section">
        <div class="print-page">
            
          <div class="HeaderRow">
            <!----NPCs-->
              <div style="padding-right:15px; padding-bottom:10px; position: relative; 
      top: 6px;">
                    @if(npcs.length > 3) {
                      <p class="textnpc2" style="padding-left:7px; padding-right:7px;"><b>+ {{npcs.length - 3}}</b></p>
                    }

                    @if (npcs[2]) {
                      @if (npcs[2].Team === 'loric') {
                        <p class="textnpc" style="color: green">{{npcs[2].Name}}</p>
                      }@else{
                        <p class="textnpc" style="color: brown">{{npcs[2].Name}}</p>
                      }
                      <img src={{npcs[2].Image}} class="imagenpc" >
                    } 

                    @if (npcs[1]) {
                      @if (npcs[1].Team === 'loric') {
                        <p class="textnpc" style="color: green;">{{npcs[1].Name}}</p>
                      }@else{
                        <p class="textnpc" style="color: brown;">{{npcs[1].Name}}</p>
                      }
                      <img src={{npcs[1].Image}} class="imagenpc">
                    }

                    
                    @if (npcs[0]) {
                      @if (npcs[0].Team === 'loric') {
                        <p class="textnpc" style="color: green;">{{npcs[0].Name}}</p>
                      }@else{
                        <p class="textnpc" style="color: brown;">{{npcs[0].Name}}</p>
                      }
                      <img src={{npcs[0].Image}} class="imagenpc">
                    }
              </div>


              <!----Name and Author-->
              <div class="ScriptName">{{scriptName}}</div>
              
              @if (author){
                <div class="Author"><i>by {{author}}</i></div>
              }
            </div>

              <!-- Townsfolk -->
              <div class="divRow">
                <div class="divider">
                  <img src="/divider.png" height="1" width="85%">
                </div>
                <div class="TypeHeader">TOWNSFOLK</div>
              </div>

              <div class="column">
              @for (item of townsfolk.slice(0,((townsfolk.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #0b6aaf;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                  </div>
                </div>
              }
              </div>

              <div class="column">
              @for (item of townsfolk.slice(((townsfolk.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
<div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #0b6aaf;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>

              <!-- Outsiders -->
              <div class="divRow">
                <div class="divider">
                  <img src="/divider.png" height="1" width="85%">
                </div>
                <div class="TypeHeader">OUTSIDERS</div>
              </div>

              <div class="column">
              @for (item of outsiders.slice(0,((outsiders.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #0b6aaf;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>

              <div class="column">
              @for (item of outsiders.slice(((outsiders.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #0b6aaf;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>

              <!-- Minions -->
              <div class="divRow">
                <div class="divider">
                  <img src="/divider.png" height="1" width="85%">
                </div>
                <div class="TypeHeader">MINIONS</div>
              </div>

              <div class="column">
              @for (item of minions.slice(0,((minions.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #760A0D;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>

              <div class="column">
              @for (item of minions.slice(((minions.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #760A0D;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>

              <!-- Demons -->
              <div class="divRow">
                <div class="divider">
                  <img src="/divider.png" height="1" width="85%">
                </div>
                <div class="TypeHeader">DEMONS</div>
              </div>

              <div class="column">
              @for (item of demons.slice(0,((demons.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #760A0D;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>

              <div class="column">
              @for (item of demons.slice(((demons.length + 1) / 2)); track item) {
                <div class="row">
                  <div class="imageDiv">
                    <img src={{item.Image}} class="charImage">
                  </div>
                  
                  <div class="chartextrow">
                    <div class="charnamerow">
                      <b class="charname" style="color: #760A0D;">{{ item.Name }}</b>
                        @for (jinx of filteredJinxes; track jinx){
                          @if (jinx.char1 === item.Name){
                            @if (getImageForName(jinx.char2)) {
                            <img src={{getImageForName(jinx.char2)}} class="jinxIcon">
                            }
                          }
                        }
                        </div>
                      <p class="charability">{{item.Ability}}</p>
                    
                  </div>
                </div>
              }
              </div>
        </div>




        
        <!----Page 2 -->
        <div class="print-page">

          <!---- First Night -->
          <div class="nightOrder" style="float:left">
          @for (char of firstOrder;track char){
            @if( char){
              <img src={{getImageForName(char)}} class="nightIcon">
            }
          }
          <p class="nightText">First Night</p>
          </div>
          
          <!---- Other Nights -->
          <div class="nightOrder" style="float:right">
          @for (char of otherOrder;track char){
            @if( char){
              <img src={{getImageForName(char)}} class="nightIcon">
            }
          }
          <p class="nightText">Other Nights</p>
          </div>

          <!----- Jinxes  -->
          @if (filteredJinxes){
                <div class="npcRow">
                    <img src="https://wiki.bloodontheclocktower.com/images/8/86/Icon_djinn.png" height="60">
                        <b class="jinxTitle">Djinn</b>
                </div>

                 @for (jinx of filteredJinxes; track jinx){
                    <div class ="jinxRow">
                      <b style="padding-right: 30px;"></b>
                      <img src={{getImageForName(jinx.char1)}} class="jinxIcon2">
                      <img src={{getImageForName(jinx.char2)}} class="jinxIcon2">
                      <p class="jinxReason">{{jinx.reason}}</p>
                    </div>
                  }
                }

                <!----Bootlegger -->
                @if (bootlegger){
                <div class="npcRow">
                    <img src="https://wiki.bloodontheclocktower.com/images/0/08/Icon_bootlegger.png" height="60">
                        <b class="jinxTitle">Bootlegger</b>
                </div>
              

                 @for (rule of bootlegger; track rule){
                    <div class ="bootleggerRow">
                      <b style="padding-right: 50px;"></b>
                      <p>‚¶Å</p>
                      <p class="bootleggerRule">{{ rule }}</p>
                    </div>
                  }
                }
                


              <!---- Other Npcs -->
              @for (item of npcs; track item) {
                @if(item.ID != "bootlegger"){
                <div class="npcRow">
                  <div class="image">
                    <img src={{item.Image}} height="60">
                  </div>
                  <div class="chartextrow">
                    <b class="npcName">{{ item.Name }}</b>
                    <p class="npcAbility">{{item.Ability}}</p>
                </div>
                </div>
              }
            }

            <!----- Travellers -->
            @if (trav){


            @for (item of trav; track item) {
                <div class="npcRow">
                  <div class="image">
                    <img src={{item.Image}} height="60">
                  </div>
                  <div class="chartextrow">
                    <b class="npcName">{{ item.Name }}</b>
                    <p class="npcAbility">{{item.Ability}}</p>
                </div>
                </div>
            }

          }



        </div>
      </div>


    </div>
</main>

<router-outlet />
